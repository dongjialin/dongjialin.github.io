<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>golang小笔记 | 折纸屋</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">golang小笔记</h1><a id="logo" href="/.">折纸屋</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">golang小笔记</h1><div class="post-meta">2020-11-07</div><div class="post-content"><h3 id="运行用时"><a href="#运行用时" class="headerlink" title="运行用时"></a>运行用时</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">start</span> := <span class="built_in">time</span>.Now()</span><br><span class="line"><span class="built_in">secs</span> := <span class="built_in">time</span>.Since(<span class="built_in">start</span>).Seconds()</span><br></pre></td></tr></table></figure>

<h3 id="将字符串-“hello”-转换为-“cello”"><a href="#将字符串-“hello”-转换为-“cello”" class="headerlink" title="将字符串 “hello” 转换为 “cello”"></a>将字符串 “hello” 转换为 “cello”</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s := <span class="string">&quot;hello&quot;</span></span><br><span class="line">c := []<span class="keyword">byte</span>(s)</span><br><span class="line">c[<span class="number">0</span>] = <span class="string">&#x27;c&#x27;</span></span><br><span class="line">s2 := <span class="keyword">string</span>(c) <span class="comment">// s2 == &quot;cello&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="切片（php中类似索引数组）"><a href="#切片（php中类似索引数组）" class="headerlink" title="切片（php中类似索引数组）"></a>切片（php中类似索引数组）</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">当相关数组还没有定义时，我们可以使用 <span class="built_in">make</span>() 函数来创建一个切片 同时创建好相关数组：<span class="keyword">var</span> slice1 []<span class="keyword">type</span> = <span class="built_in">make</span>([]<span class="keyword">type</span>, <span class="built_in">len</span>)。</span><br><span class="line">也可以简写为 slice1 := <span class="built_in">make</span>([]<span class="keyword">type</span>, <span class="built_in">len</span>)，这里 <span class="built_in">len</span> 是数组的长度并且也是 slice 的初始长度。</span><br><span class="line">所以定义 s2 := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">10</span>)，那么 <span class="built_in">cap</span>(s2) == <span class="built_in">len</span>(s2) == <span class="number">10</span>。</span><br><span class="line"></span><br><span class="line"><span class="built_in">make</span> 接受 <span class="number">2</span> 个参数：元素的类型以及切片的元素个数。</span><br><span class="line">如果你想创建一个 slice1，它不占用整个数组，而只是占用以 <span class="built_in">len</span> 为个数个项，那么只要：slice1 := <span class="built_in">make</span>([]<span class="keyword">type</span>, <span class="built_in">len</span>, <span class="built_in">cap</span>)。</span><br><span class="line"><span class="built_in">make</span> 的使用方式是：<span class="function"><span class="keyword">func</span> <span class="title">make</span><span class="params">([]T, <span class="built_in">len</span>, <span class="built_in">cap</span>)</span>，其中 <span class="title">cap</span> 是可选参数。</span></span><br><span class="line"></span><br><span class="line">所以下面两种方法可以生成相同的切片:</span><br><span class="line"><span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">50</span>, <span class="number">100</span>)</span><br><span class="line"><span class="built_in">new</span>([<span class="number">100</span>]<span class="keyword">int</span>)[<span class="number">0</span>:<span class="number">50</span>]</span><br></pre></td></tr></table></figure>

<h3 id="map（php中类似关联数组）"><a href="#map（php中类似关联数组）" class="headerlink" title="map（php中类似关联数组）"></a>map（php中类似关联数组）</h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">map</span> 是 引用类型 的： 内存用 <span class="built_in">make</span> 方法来分配。</span><br><span class="line"><span class="keyword">map</span> 的初始化：<span class="keyword">var</span> map1 = <span class="built_in">make</span>(<span class="keyword">map</span>[keytype]valuetype)。</span><br><span class="line">或者简写为：map1 := <span class="built_in">make</span>(<span class="keyword">map</span>[keytype]valuetype)。</span><br><span class="line"></span><br><span class="line">上面例子中的 mapCreated 就是用这种方式创建的：mapCreated := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">float32</span>)。</span><br><span class="line">相当于：mapCreated := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">float32</span>&#123;&#125;。</span><br><span class="line">mapAssigned 也是 mapList 的引用，对 mapAssigned 的修改也会影响到 mapLit 的值。</span><br><span class="line"></span><br><span class="line">不要使用 <span class="built_in">new</span>，永远用 <span class="built_in">make</span> 来构造 <span class="keyword">map</span></span><br><span class="line"></span><br><span class="line">map1 := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">map1[<span class="string">&quot;New Delhi&quot;</span>] = <span class="number">55</span></span><br><span class="line">map1[<span class="string">&quot;Beijing&quot;</span>] = <span class="number">20</span></span><br><span class="line">map1[<span class="string">&quot;Washington&quot;</span>] = <span class="number">25</span></span><br></pre></td></tr></table></figure>

<h3 id="转json"><a href="#转json" class="headerlink" title="转json"></a>转json</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">json</span>, _ := <span class="type">json</span>.Marshal(<span class="keyword">array</span>)</span><br></pre></td></tr></table></figure></div><div class="tags"><a href="/tags/Golang/"><i class="fa fa-tag"></i>Golang</a></div><div class="post-nav"><a class="pre" href="/2020/11/10/leetcode/">leetcode</a><a class="next" href="/2020/11/06/hello-world/">你好，朋友</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://blog.dongjialin.top"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Golang/" style="font-size: 15px;">Golang</a> <a href="/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/" style="font-size: 15px;">碎碎念</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2020/11/10/leetcode/">leetcode</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/07/go1/">golang小笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2020/11/06/hello-world/">你好，朋友</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.dongjialin.top/" title="RGB颜色值" target="_blank">RGB颜色值</a><ul></ul><a href="https://web.okjike.com/" title="即刻" target="_blank">即刻</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">折纸屋.</a><div></div><div class="github-badge"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hexo</span></div> <div class="github-badge"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></div></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>